<!DOCTYPE html>
<html>
  <head>
    <title>Java</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <!--HTMLで表示するところ-->
    <section>
      <p>いまから<span id="timer"></span>以内に注文すると50％オフ！！！</p>
    </section>

    <script>
    'use strict';
    function countdown(due) {
      const now = new Date();

      const rest = due.getTime() - now.getTime();
      const sec = Math.floor(rest / 1000) % 60;
      const min = Math.floor(rest / 1000) % 60;
      const hours = Math.floor(rest / 1000 / 60 / 60) % 24;
      const days = Math.floor(rest / 1000 / 60 / 60 / 24);
      const count = [days, hours, min, sec];

      return count;
    }

    let goal = new Date();
    goal.setHours(23);
    goal.setMinutes(59);
    goal.setSeconds(59);

    console.log(countdown(goal));
    const counter = countdown(goal);
    const time = `${counter[1]}時間${counter[2]}分${counter[3]}秒`;
    document.getElementById('timer').textContent = time;


    </script>
    <%= yield %>
  </body>
</html>
